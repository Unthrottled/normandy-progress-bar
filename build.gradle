plugins {
    id 'org.jetbrains.intellij' version '0.4.16'
    id "org.jetbrains.kotlin.jvm" version "1.3.72"
    id 'org.kordamp.gradle.markdown' version '2.0.0'
    id "org.jlleitschuh.gradle.ktlint" version "8.2.0"
}
repositories {
    mavenCentral()
}

group 'io.unthrottled'
version '1.9.1'

dependencies {
    implementation "org.jetbrains.kotlin:kotlin-stdlib-jdk8"
    implementation "com.google.code.gson:gson:2.8.5"
}

intellij {
  version '2020.1'
  type 'IU'
  alternativeIdePath idePath
}

compileKotlin {
    kotlinOptions.jvmTarget = "1.8"
}
compileTestKotlin {
    kotlinOptions.jvmTarget = "1.8"
}

markdownToHtml {
    sourceDir new File("$projectDir/docs")
    outputDir new File("$projectDir/docs")
}

patchPluginXml {
    changeNotes file("$projectDir/docs/CHANGELOG.html").text
    sinceBuild System.getenv("pluginSinceBuild") ?: sinceBuildP
    untilBuild System.getenv("pluginUntilBuild") ?: untilBuildP
}
